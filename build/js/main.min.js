/* starfield-with-images 2013-07-15 */
function init(){container=document.createElement("div"),document.body.appendChild(container),container.appendChild(canvas),canvas.width=SCREEN_WIDTH,canvas.height=SCREEN_HEIGHT,context.translate(HALF_WIDTH,HALF_HEIGHT),particleImage.src="img/particle.png";for(var a=0;8>a;a++)images[a]=new Image,images[a].src="img/"+(a+1)+".png";document.addEventListener("mouseover",slowDown,!1),document.addEventListener("mouseout",resume,!1);for(var b=0,c=0,a=0;24>a;a++){var d=new Point3D(randomRange(-150,150),randomRange(-150,150),randomRange(-fov,fov));if(0===a)b=d.z,c=d.z,points.unshift(d);else if(d.z<b)b=d.z,points.unshift(d);else if(d.z>c)c=d.z,points.push(d);else for(var e=0;e<points.length;e++)if(d.z<points[e].z){points.splice(e,0,d);break}}}function onDocumentMouseMove(a){mouseX=a.clientX-HALF_WIDTH,mouseY=a.clientY-HALF_HEIGHT}function loopInit(){context.globalCompositeOperation="source-over",context.fillStyle="rgb(255,255,255)",context.globalAlpha=1,context.fillRect(-HALF_WIDTH,-HALF_HEIGHT,SCREEN_WIDTH,SCREEN_HEIGHT)}function fastLoop(){for(loopInit(),i=0;i<points.length;i++){var a=points[i];a.z+=2.5,a.z<-fov?a.z=a.z+fov+fov:a.z>fov&&(a.z=a.z-fov-fov),draw3Din2D(a,context,images[i%8])}}function slowLoop(){for(loopInit(),i=0;i<points.length;i++){var a=points[i];a.z+=.1,a.z<-fov?a.z=a.z+fov+fov:a.z>fov&&(a.z=a.z-fov-fov),draw3Din2D(a,context,images[i%8])}}function slowDown(){clearInterval(fast),window.slow=setInterval(slowLoop,1e3/30)}function resume(){clearInterval(slow),window.fast=setInterval(fastLoop,1e3/30)}function Point3D(a,b,c){this.x=a,this.y=b,this.z=c}function draw3Din2D(a,b,c){var d=fov/(fov+a.z);if(!(0>d||d>12)){var e=a.x*d,f=a.y*d;b.save(),b.translate(e,f),b.scale(.8*d,.8*d),b.translate(c.width*-.5,c.height*-.5),b.drawImage(c,0,0),b.restore()}}function randomRange(a,b){return Math.random()*(b-a)+a}var SCREEN_WIDTH=window.innerWidth,SCREEN_HEIGHT=window.innerHeight,HALF_WIDTH=window.innerWidth/2,HALF_HEIGHT=window.innerHeight/2,canvas=document.createElement("canvas"),context=canvas.getContext("2d"),mouseX=0,mouseY=0,fov=150,TO_RADIANS=Math.PI/180,points=[],particleImage=new Image;images=[],init();var fast=setInterval(fastLoop,1e3/30);